/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /gh/7aimez/Flux-Lang@main/lang/flux.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
const keywords=new Set(["if","else","elseif","switch","case","default","while","for","break","continue","return","let","const","var","mutable","static","function","fn","lambda","async","await","int","float","string","bool","object","array","enum","class","try","catch","finally","throw","and","or","not","is","in","mod","import","export","package","module","include","class","extends","super","this","interface","abstract","true","false","null","new","delete"]);function isKeyword(e){return keywords.has(e)}const builtInFunctions={print:(...e)=>console.log(...e),len:e=>e.length,sqrt:Math.sqrt,pow:Math.pow,abs:Math.abs,int:e=>parseInt(e,10),float:e=>parseFloat(e),str:e=>String(e),upper:e=>e.toUpperCase(),lower:e=>e.toLowerCase(),random:Math.random,input:prompt,type:e=>typeof e,round:Math.round,toString:e=>e.toString(),parseInt:e=>parseInt(e,10),parseFloat:e=>parseFloat(e),isNaN:isNaN,slice:(e,t,r)=>e.slice(t,r),concat:(e,t)=>e.concat(t)};function lexer(e){const t=/\s*([A-Za-z_]\w*|\d+(\.\d+)?|"[^"]*"|'[^']*'|[+\-*/=();,{}<>]|==|!=|<=|>=|&&|\|\||!)\s*/g;let r,n=[];for(;null!==(r=t.exec(e));)n.push(r[1]);return n}function parser(e){let t=0;function r(){return e[t]}function n(r){let n=e[t];if(r&&n!==r)throw new Error(`Expected "${r}" but got "${n}"`);return t++,n}function a(){let e=function(){let e=r();if(!e)throw new Error("Unexpected end of input");if(isNaN(e))return'"'===e[0]||"'"===e[0]?(n(),{type:"string",value:e.slice(1,-1)}):isKeyword(e)?(n(),"true"===e||"false"===e||"null"===e?{type:"literal",value:"true"===e||"false"!==e&&null}:{type:"keyword",value:e}):(n(),{type:"variable",name:e});return n(),{type:"number",value:Number(e)}}();for(;"("===r();){n("(");let t=[];if(")"!==r())do{t.push(o())}while(","===r()&&n(","));n(")"),e={type:"call",callee:e,arguments:t}}return e}function o(){let e=a();for(;"+"===r()||"-"===r()||"*"===r()||"/"===r()||"=="===r()||"!="===r();){e={type:"binary",operator:n(),left:e,right:a()}}return e}function l(){if("let"===r()||"const"===r()||"var"===r()){let e=n(),t=n();if(!t.match(/^[A-Za-z_]\w*$/))throw new Error("Invalid variable name");n("=");let r=o();return n(";"),{type:"var_decl",kind:e,name:t,expr:r}}{let e=o();return n(";"),{type:"expr_stmt",expr:e}}}let s=[];for(;!(t>=e.length);)s.push(l());return s}class Interpreter{constructor(){this.env=Object.create(null)}eval(e){switch(e.type){case"number":case"string":case"literal":return e.value;case"variable":if(e.name in this.env)return this.env[e.name];throw new Error(`Undefined variable '${e.name}'`);case"call":let t=this.eval(e.callee);if("function"!=typeof t)throw new Error("Call of non-function");return t(...e.arguments.map((e=>this.eval(e))));case"binary":let r=this.eval(e.left),n=this.eval(e.right);switch(e.operator){case"+":return r+n;case"-":return r-n;case"*":return r*n;case"/":return r/n;case"==":return r===n;case"!=":return r!==n;default:throw new Error(`Unsupported operator ${e.operator}`)}case"var_decl":let a=this.eval(e.expr);return this.env[e.name]=a,null;case"expr_stmt":return this.eval(e.expr);default:throw new Error("Unknown node type "+e.type)}}}function executeFlux(e){const t=parser(lexer(e)),r=new Interpreter;for(const e in builtInFunctions)r.env[e]=builtInFunctions[e];for(const e of t)r.eval(e)}window.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll("flux").forEach((e=>{try{executeFlux(e.textContent)}catch(e){console.error("Flux error:",e)}}))}));
//# sourceMappingURL=/sm/417e92da378136230ceedf7dbc250a66704c4e42109c36f5da313070a78010b1.map
